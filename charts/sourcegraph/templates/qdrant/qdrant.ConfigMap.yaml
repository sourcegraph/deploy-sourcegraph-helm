{{- if .Values.qdrant.enabled -}}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Values.qdrant.name }}
  labels:
    deploy: sourcegraph
    app.kubernetes.io/component: qdrant
data:
  config.yaml: |
    debug: true
    log_level: INFO
    storage:
      storage_path: /data
      on_disk_payload: true
    performance:
      max_optimization_threads: 4
    optimizers:
      max_optimization_threads: 4
      mmap_threshold_kb: 1
      indexing_threshold_kb: 0
    hnsw_index:
      m: 8
      ef_construct: 100
      full_scan_threshold: 10
      max_indexing_threads: 4
      on_disk: true
      payload_m: 8
    service:
      http_port: 6333
      grpc_port: 6334
    telemetry_disabled: true
{{- end }}
