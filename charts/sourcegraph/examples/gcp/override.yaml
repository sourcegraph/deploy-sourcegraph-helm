frontend:
  serviceType: ClusterIP
  ingress:
    enabled: true
    annotations:
      kubernetes.io/ingress.class: null
    ingressClassName: gce
    host: sourcegraph.company.com # Replace with your actual domain
  serviceAnnotations:
    cloud.google.com/neg: '{"ingress": true}'
    # reference the `BackendConfig` CR we will be configuring at a later step
    beta.cloud.google.com/backend-config: '{"default": "sourcegraph-frontend"}'

storageClass:
  create: true
  type: pd-ssd # This configures SSDs (recommended).
  provisioner: pd.csi.storage.gke.io
  volumeBindingMode: WaitForFirstConsumer
  reclaimPolicy: Retain

extraResources:
  - apiVersion: cloud.google.com/v1
    kind: BackendConfig
    metadata:
      name: sourcegraph-frontend
    spec:
      healthCheck:
        checkIntervalSec: 5
        timeoutSec: 5
        requestPath: /ready
        port: 6060 # we use a custom port to perform healthcheck
  - apiVersion: cloud.google.com/v1 # Second manifest just for demonstration purposes
    kind: BackendConfig
    metadata:
      name: sourcegraph-frontend-example
    spec:
      healthCheck:
        checkIntervalSec: 5
        timeoutSec: 5
        requestPath: /ready
        port: 6060 # we use a custom port to perform healthcheck
