suite: localDevMode
templates:
  - minio/minio.Secret.yaml
  - frontend/sourcegraph-frontend.Deployment.yaml
tests:
  - it: should not have a resource block when localDevMode=true
    template: frontend/sourcegraph-frontend.Deployment.yaml
    set:
      sourcegraph.localDevMode: true
    asserts:
      - isEmpty:
          path: spec.template.spec.containers[0].resources

  - it: should have a resource block when localDevMode=false
    template: frontend/sourcegraph-frontend.Deployment.yaml
    set:
      sourcegraph.localDevMode: false
    asserts:
      - isNotEmpty:
          path: spec.template.spec.containers[0].resources
